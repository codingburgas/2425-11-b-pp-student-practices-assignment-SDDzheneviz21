# Система за AI Предсказване на Калории

Уеб приложение с Flask за предсказване на изгорени калории чрез машинно обучение, с потребителски и администраторски панел, визуализации и метрики.

## Основни функционалности
- Регистрация и вход на потребители
- Потребителски профили
- Предсказване на изгорени калории според въведени данни
- Възможност за публични/частни предсказания
- Админ панел с преглед на всички предсказания и ML метрики
- Визуализации на входни данни и резултати
- Анкети за обратна връзка

## Инсталация
1. Клонирай репото:
```bash
git clone <repository-url>
cd <repository-name>
```
2. Създай виртуална среда и я активирай:
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```
3. Инсталирай зависимостите:
```bash
pip install -r requirements.txt
```
4. Инициализирай базата:
```bash
flask db init
flask db migrate
flask db upgrade
```
5. Създай админ потребител:
```bash
flask shell
>>> from app import db
>>> from app.models.user import User, UserProfile
>>> admin = User(username='admin', email='admin@example.com', is_admin=True)
>>> admin.set_password('парола')
>>> profile = UserProfile(user=admin)
>>> db.session.add(admin)
>>> db.session.add(profile)
>>> db.session.commit()
>>> exit()
```

## Стартиране
```bash
flask run
```
Отвори http://localhost:5000

## Структура на проекта
```
project/
├── app/
│   ├── __init__.py
│   ├── models/         # Модели и ML логика
│   ├── static/         # CSS, диаграми
│   ├── templates/      # HTML шаблони
│   ├── auth/           # Автентикация
│   ├── main/           # Основни потребителски функции
│   └── admin/          # Админ панел
├── config.py
├── requirements.txt
└── run.py
```

## Описание на модулите
- **app/models/** – ML логика, потребителски и prediction модели
- **app/auth/** – Вход, регистрация, смяна на парола
- **app/main/** – Профил, предсказване, анкети
- **app/admin/** – Админ панел: всички предсказания, метрики, детайли
- **app/utils/** – Помощни функции (напр. време/часова зона)
- **app/templates/** – HTML страници за всички роли

## Предсказване на калории
Потребителят въвежда:
- Време на тренировка (минути)
- Пулс
- Възраст
- Тегло
- Пол

### Формула за изчисляване
```
Изгорени калории = Време (минути) × (MET × 3.5 × Тегло (кг)) / 200
```
- **MET** се определя според пулса:
    - < 100: MET = 3.5 (лека активност)
    - 100–129: MET = 6 (умерена)
    - 130+: MET = 8 (интензивна)

## Какво е MET?
MET (Metabolic Equivalent of Task) е единица за енергоразход. 1 MET = разхода в покой (~1 kcal/kg/час). По-висок MET = по-интензивна активност.

## Машинно обучение и метрики
- Използва се логистична регресия за класификация (над/под 200 калории)
- Моделът се тренира динамично при всяка заявка за метрики или вероятност, използвайки всички предсказания
- Метрики:
    - Logloss (Ентропия)
    - Precision (Точност)
    - Recall (Чувствителност)
    - F1-score
    - Accuracy (Точност на модела)
    - Confusion Matrix (Матрица на объркванията)
- Визуализации: графики на входни данни, резултати, confusion matrix

## Лиценз
MIT License
